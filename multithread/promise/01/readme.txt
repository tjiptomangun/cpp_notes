https://github.com/glhrmfrts/future.c/blob/master/future.c
