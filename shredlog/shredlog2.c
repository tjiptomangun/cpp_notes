#include <stdio.h>
unsigned char originalData[]=
{
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90,
'1','2','g','z','q','*','#','@','y','v',
'a','b','c','d',1,'2',3,195,132,212,
'~','`','!','@','$','\\',':',',','.',',',
23,45,89,66,57,89,120,125,88,90,
1,2,0,'^','%','*','#','~',54,78,
'1','2','g','z','q','*','#','@','y','v',
'~','`','!','@','$','\\',':',',','.',',',
1,2,0,'^','%','*','#','~',54,78,
'a','b','c','d',1,'2',3,195,132,212,
23,45,89,66,57,89,120,125,88,90
};
#define BLOCK_FACTOR 8
#define BLOCK_SIZE 1<<BLOCK_FACTOR
#define LOG_MAX_SIZE 4400
/*
* For max performance, we should access disk as 
* rarely as possible. But creating big buffer
* could cause another performance problem.
* On the other hand we choose not touch the original buffer.
*/
int shredbuf(int fd,unsigned char * buff, int bufflen)
{
   unsigned char block[BLOCK_SIZE+1];
   int nBlockIdx=0;/*currently processed buff, incremented by BUFF_SIZE*/
   int nBlockMax;/*blok max size 0-BUFF_SIZE*/
   int nRest;/*rest of segment to process*/
   int nInIdx;/*var to hold internal index*/
   int nToWrite,nRem;
   int nNumSegs;
   int nNumParts;/*1 segment = 2 parts, first part is anything, second part is ####*/
   unsigned char* pBuffBlock,* segment;
   unsigned char mask[]={'#','#','#','#',0};
   int maskLen = 4;
   block[BLOCK_SIZE0]=0;
   /*Buffer is processed per block, incrementally, since we need to write it to file*/
   /*Block is processed per segment, incrementally*/
   /*1 segment is 8 bytes*/
   nBlockMax= (((nBlockIdx + BLOCK_SIZE)>bufflen)?(bufflen-nBlockIdx):BLOCK_SIZE);
   while(nBlockMax)
   {//block operation
       if(nBlockMax==BLOCK_SIZE)
       {
          pBlock= &buff[nBlockIdx ];
          nNumSegs = BLOCK_SIZE>>3;
          nNumParts=nNumSegs <<1;
          for(nInIdx=0;nInIdx<nNumParts;nInIdx++)
          {
             memcpy(block[nInIdx],pBlock[nInIdx],4);
             nInIdx++;
             memcpy(block[nInIdx],mask,4);
          }
          nBuffIdx+=BLOCK_SIZE;
          nBlockIdx+= BLOCK_SIZE;
          nBlockMax= (((nBlockIdx + BLOCK_SIZE)>bufflen)?(bufflen-nBlockIdx):BLOCK_SIZE);
          fprintf(block,BLOCK_SIZE)
       }
   }
     pBlock= &buff[nBlockIdx ];/*processing segment[0] to segment[nMax]*/
     nRest = nBlockMax;
     if(nRest>0)
     {//segment operation
         nRem = nRest%8;
         nNumSegs = nRest>>3;
         nInIdx= (nRem == 0? (nRest-8):(nRest-8 + nRem));
         if(nRem)
         {
            if(nRem>4)
            {
            
            }
            else
            {
            
            }
            nRest-=nRem;
         }
         
     }
     nBlockIdx+= BLOCK_SIZE;
     nBlockMax= (((nBlockIdx + BLOCK_SIZE)>bufflen)?(bufflen-nIdx):BLOCK_SIZE);
   }
}

int main(int argc, char *argv[])
{
   
}
